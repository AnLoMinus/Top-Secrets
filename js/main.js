class SecretsManager {
  constructor() {
    this.searchInput = document.querySelector(".search-input");
    this.secretsGrid = document.querySelector(".secrets-grid");
    this.allSecrets = [];
    this.debounceTimeout = null;

    this.initialize();
  }

  async initialize() {
    // ×”×¦×’×ª ×× ×™××¦×™×™×ª ×˜×¢×™× ×”
    this.secretsGrid.innerHTML = '<div class="loading">×˜×•×¢×Ÿ ×¡×•×“×•×ª...</div>';

    try {
      // ×˜×¢×™× ×ª ×”×¡×•×“×•×ª ×™×©×™×¨×•×ª ××”××•×‘×™×™×§×˜ ×”××•×’×“×¨
      this.allSecrets = this.getLocalSecrets();
      window.cachedSecrets = this.allSecrets;

      // ×”×¦×’×ª ×›×œ ×”×¡×•×“×•×ª
      this.renderSecrets(this.allSecrets);

      // ×¢×“×›×•×Ÿ ×”×ª××¨×™×š ×•×”×©×¢×”
      this.updateDateTime();

      // ×”×•×¡×¤×ª ×××–×™× ×™ ××™×¨×•×¢×™× ×œ×—×™×¤×•×©
      this.setupSearchListeners();

      // ×¢×“×›×•×Ÿ ×”×©×¢×” ×›×œ ×“×§×”
      setInterval(() => this.updateDateTime(), 60000);
    } catch (error) {
      this.handleError(error);
    }
  }

  // ×‘××§×•× ×œ×˜×¢×•×Ÿ ××§×•×‘×¥ ×—×™×¦×•× ×™, ×”× ×ª×•× ×™× ××•×’×“×¨×™× ×™×©×™×¨×•×ª ×‘×§×•×“
  getLocalSecrets() {
    return [
      {
        id: 1,
        title: "×©××•×¨×•×ª ×˜×‘×¢ × ×¡×ª×¨×•×ª",
        mainContent: "×™×© ×‘×¢×•×œ× ×©××•×¨×•×ª ×˜×‘×¢ × ×¡×ª×¨×•×ª, ×©×œ× × ××¦××•×ª ×‘××¤×•×ª ×”×ª×™×™×¨×™× ğŸ—ºï¸",
        details:
          "×œ×¤×¢××™×, ××˜×™×™×œ×™× ×× ×•×¡×™× ××•×¦××™× ×¤×™× ×•×ª ×˜×‘×¢ ××•×¤×œ××•×ª ×©×©×•××¨×•×ª ×¢×œ ×¢×¦××Ÿ ×‘×–×›×•×ª ×–×” ×©××™×Ÿ ×œ×”×Ÿ ×¤×¨×¡×•× ×”××•× ×™. ×–×” ×›××• ×™×¢×¨×•×ª ×’×©× ×¢× ××¤×œ×™× ×—×‘×•×™×™×, ×—×•×¤×™× ××‘×•×“×“×™× ×¢× ××™× ×¦×œ×•×œ×™×, ×•××¢×¨×•×ª × ×˜×™×¤×™× ×§×¡×•××•×ª ×©×¨×§ ×”××§×•××™×™× ××›×™×¨×™× ğŸŒŠğŸ¦‹",
        extraInfo:
          "×™×© ×× ×©×™× ×©×©×•××¨×™× ×¢×œ ×”××§×•××•×ª ×”××œ×• ×‘×¡×•×“, ×›×“×™ ×œ×”×’×Ÿ ×¢×œ×™×”× ××”×”××•× ×™× ×•×œ×©××•×¨ ×¢×œ×™×”× ×˜×‘×¢×™×™×, × ×§×™×™× ×•×©×œ×•×•×™× ğŸŒ¿ğŸ’š",
        conclusion:
          "××– ×‘×¤×¢× ×”×‘××” ×›×©××ª× ×‘×˜×™×•×œ, ××•×œ×™ ×ª×’×œ×• ×¤×™× ×” ×¡×•×“×™×ª ×›×–×• ×‘×¢×¦××›×! ğŸ˜‰",
        emoji: "ğŸ—ºï¸",
      },
      {
        id: 2,
        title: "× Ö·×¡Ö¸Ö¼×™Ö´×™ ×¨×™×—×•×ª",
        mainContent:
          "×™×“×¢×ª ×©×™×© ××§×¦×•×¢×•×ª ×©×××© ×¡×•×“×™×™× ×¢×“ ×›×“×™ ×›×š ×©××¢×˜×™× ×‘×¢×•×œ× ×™×•×“×¢×™× ×¢×œ×™×”×? ğŸ¤«",
        details:
          "×œ××©×œ, ×™×© ×× ×©×™× ×©×¢×•×‘×“×™× ×‘×ª×•×¨ × Ö·×¡Ö¸Ö¼×™Ö´×™ ×¨×™×—×•×ª â€“ ××•××—×™× ×œ×–×™×”×•×™ ×•×¨×§×™×—×ª × ×™×—×•×—×•×ª ×‘×‘×©××™× ×™×•×§×¨×ª×™×™× ××• ×‘××–×•×Ÿ. ×”× Ö·×¡Ö¸Ö¼×™Ö´×™× ×”××œ×” ×××•×× ×™× ×©× ×™× ×›×“×™ ×œ×–×”×•×ª ×›×œ ×¨×™×— ×‘×¨××ª ×“×™×•×§ ××˜×•×¨×¤×ª. ×œ×¢×™×ª×™× ×”× ××¤×™×œ×• ×¢×•×‘×“×™× ×‘×—×“×¨×™× ×¡×•×“×™×™×, ×›×“×™ ×©×œ× ×™×™×—×©×£ ××” ×”× ××¨×›×™×‘×™×",
        extraInfo:
          "×—×‘×¨×•×ª ×‘×•×©× ×¢×•×œ××™×•×ª ×©×•××¨×•×ª ××ª ×”××ª×›×•× ×™× ×©×œ×”×Ÿ ×‘×¡×•×“ ×›××¢×˜ ×›××• ××ª×›×•×Ÿ ×©×œ ×§×¡×. ×—×œ×§ ××”×Ÿ ××—×–×™×§×•×ª ×‘× ×•×¡×—××•×ª ×¡×•×“×™×•×ª ×©×©××•×¨×•×ª ×‘×›×¡×¤×•×ª ×××•×‘×˜×—×•×ª ğŸ”’",
        conclusion:
          "××– ×‘×¤×¢× ×”×‘××” ×©×ª×‘×—×¨×• ×‘×•×©×, ×ª×“×¢×• ×©×™×© ×××—×•×¨×™ ×”×¨×™×— ×”×–×” ×¢×•×œ× ×¡×•×“×™ ×•××™×•×—×“! ğŸ•µï¸â€â™€ï¸ğŸ’",
        emoji: "ğŸŒ¹",
      },
      {
        id: 3,
        title: "×”×§×˜×§×•××‘×•×ª ×©×œ ×¤×¨×™×–",
        mainContent:
          "×©××¢×ª ×¤×¢× ×¢×œ ×”×× ×”×¨×•×ª ×”×ª×ª-×§×¨×§×¢×™×•×ª ×”×¡×•×“×™×•×ª ×©× ××¦××•×ª ××ª×—×ª ×œ×¢×¨×™× ××¤×•×¨×¡××•×ª ×‘×¢×•×œ×? ğŸŒ",
        details:
          "×‘×¢×™×¨ ×¤×¨×™×– ×™×© ×¨×©×ª ××¡×•×‘×›×ª ×©×œ ×× ×”×¨×•×ª ×©× ×§×¨××ª ×”×§×˜×§×•××‘×•×ª ×©×œ ×¤×¨×™×–. ×”×× ×”×¨×•×ª ×”××œ×” ××œ××•×ª ×‘×©×œ×“×™× ×©×œ ××™×œ×™×•× ×™ ×× ×©×™× ×©× ×§×‘×¨×• ×©× ×œ×¤× ×™ ×××•×ª ×©× ×™×, ×•×›××” ××”×Ÿ ×¢×“×™×™×Ÿ ×¡×’×•×¨×•×ª ×•××¡×ª×•×¨×™×•×ª ×œ×—×œ×•×˜×™×Ÿ",
        extraInfo:
          "×™×© ×§×‘×•×¦×•×ª ×¡×•×“×™×•×ª ×©×œ ×× ×©×™×, ×©× ×§×¨××™× ×§×˜××•×¤×™×œ×™×, ×©× ×›× ×¡×™× ×œ×©× ×‘×—×©××™ ×•×¢×•×¨×›×™× ××¡×™×‘×•×ª ×•×¡×™×•×¨×™× ×‘××¢××§×™ ×”×× ×”×¨×•×ª",
        conclusion:
          "××– ××ª×—×ª ×œ×¨×—×•×‘×•×ª ×”×¨×’×™×œ×™× ×©×œ ×¤×¨×™×–, ×™×© ×¢×™×¨ × ×¡×ª×¨×ª ×•××¡×ª×•×¨×™×ª ×œ×—×œ×•×˜×™×Ÿ, ×©××—×›×” ×œ×”×™×—×©×£ ğŸ•¯ï¸ğŸŒ«ï¸",
        emoji: "ğŸ°",
      },
      {
        id: 4,
        title: "××’× ×”×™×œ×™×™×¨ ×”×•×•×¨×•×“",
        mainContent:
          "×©××¢×ª ×¢×œ ×›×š ×©×™×© ××’× ××¡×ª×•×¨×™ ×‘×©× ××’× ×”×™×œ×™×™×¨ ×‘××•×¡×˜×¨×œ×™×” ×©×¦×‘×¢×• ×•×¨×•×“? ×›×Ÿ, ×××© ×•×¨×•×“ ×›××• ××¡×˜×™×§! ğŸ’–",
        details:
          "×”××’× ××•×§×£ ×‘× ×•×£ ×™×¨×•×§, ×•×”××™× ×”×•×•×¨×•×“×™× ×©×œ×• × ×•×¦×¦×™× ×‘×¦×•×¨×” ××“×”×™××”. ×”××“×¢× ×™× ×œ× ×”×¦×œ×™×—×• ×œ××¦×•× ×ª×©×•×‘×” ×—×“-××©××¢×™×ª ×œ×¡×™×‘×” ×œ×›×š ×©×”××’× ×•×¨×•×“",
        extraInfo:
          "×”×”×©×¢×¨×” ×”×™× ×©×–×” ×§×©×•×¨ ×œ×¡×•×’ ××¡×•×™× ×©×œ ××¦×•×ª ×©×—×™×•×ª ×‘××™× ××• ×œ×ª×’×•×‘×” ×›×™××™×ª ×‘×™×Ÿ ×”××œ×— ×œ××™× ×¨×œ×™× ×‘××’×, ××‘×œ ×–×” ×¢×“×™×™×Ÿ ×‘×’×“×¨ ×ª×¢×œ×•××”",
        conclusion:
          "×•×”×›×™ ××¢× ×™×™×Ÿ? ×’× ×× ×ª×™×§×—×• ×‘×§×‘×•×§ ××™× ××”××’× ×•×ª×‘×™××• ××•×ª×• ×”×‘×™×ª×”, ×”××™× ×™×™×©××¨×• ×•×¨×•×“×™×! ğŸ¨ğŸ’§",
        emoji: "ğŸ’–",
      },
      {
        id: 5,
        title: "×”×¡×¤×¨×™×™×” ×”×¡×•×“×™×ª ×©×œ ×”×•×•×ª×™×§×Ÿ",
        mainContent:
          "××ª×—×ª ×œ×§×¨×§×¢, ×‘××¢××§×™ ×”×•×•×ª×™×§×Ÿ, ××¡×ª×ª×¨×ª ×”×¡×¤×¨×™×™×” ×”×¡×•×“×™×ª ×©×œ ×”×•×•×ª×™×§×Ÿ ğŸ“œ",
        details:
          "××“×•×‘×¨ ×‘××—×“ ×”××•×¡×¤×™× ×”×¡×•×“×™×™× ×•×”××•×’× ×™× ×‘×™×•×ª×¨ ×‘×¢×•×œ×, ×•×”×›× ×™×¡×” ××œ×™×• ××•×ª×¨×ª ×¨×§ ×œ×—×•×§×¨×™× ×‘×•×“×“×™× ×©× ×‘×—×¨×• ×‘×§×¤×™×“×” ×¢×œ ×™×“×™ ×”×›× ×¡×™×™×”",
        extraInfo:
          "×‘×™×Ÿ ×”××¡××›×™× ×”××œ×” ×™×© ×’× ×›×ª×‘×™× ×©××£ ××—×“ ××—×•×¥ ×œ×›× ×¡×™×™×” ×œ× ×–×›×” ×œ×¨××•×ª, ×•××•××¨×™× ×©××•×œ×™ ×™×© ×©× ××¤×™×œ×• ××¡××›×™× ××ª×§×•×¤×ª ×™×©×•, ×’×™×œ×•×™×™× ××“×¢×™×™× ×¢×ª×™×§×™×, ×•××›×ª×‘×™× ×¡×•×“×™×™×",
        conclusion:
          "×”×¨×‘×” ××”×¡×¤×¨×™×™×” ×¢×“×™×™×Ÿ ×œ× × ×—×©×£, ×•×–×” ××•×œ×™ ××—×“ ×”×¡×•×“×•×ª ×”×©××•×¨×™× ×‘×™×•×ª×¨ ×‘×¢×•×œ×",
        emoji: "ğŸ“œ",
      },
      {
        id: 6,
        title: "×”×¤×™×¨××™×“×•×ª ×©×œ ×™×•× ××’×•× ×™",
        mainContent:
          "×‘××¢××§×™ ×”×™×, ×œ×™×“ ××™×™ ×™×¤×Ÿ, ×§×™×™× ××‘× ×” ×¡×•×“×™ ×•××¡×ª×•×¨×™ ×©× ×§×¨× ×”×¤×™×¨××™×“×•×ª ×©×œ ×™×•× ××’×•× ×™ ğŸŒŠ",
        details:
          "××“×•×‘×¨ ×‘××‘× ×” ×¡×œ×¢×™ ×¢× ×§ ×©× ×¨××” ×›××• ×—×•×¨×‘×•×ª ×¢×™×¨ ×§×“×•××”, ×¢× ××“×¨×’×•×ª, ×§×™×¨×•×ª, ×•×¢××•×“×™× ×¡×™××˜×¨×™×™× ×©××–×›×™×¨×™× ×××•×“ ××‘× ×™× ×× ×•×©×™×™×",
        extraInfo:
          "×—×œ×§ ××”××“×¢× ×™× ××××™× ×™× ×©×”××‘× ×” ×”×–×” ×”×•× ×ª×•×¤×¢×ª ×˜×‘×¢ × ×“×™×¨×”, ×‘×¢×•×“ ××—×¨×™× ××©×¢×¨×™× ×©××“×•×‘×¨ ×‘×¢×™×¨ ×¢×ª×™×§×” ×©××•×œ×™ × ×‘× ×ª×” ×œ×¤× ×™ ×¢×©×¨×•×ª ××œ×¤×™ ×©× ×™×",
        conclusion:
          "×”××§×•× ×”×–×” ×›×œ ×›×š ××¡×ª×•×¨×™, ×©××¢×˜×™× ××¦×œ×™×—×™× ×œ×¦×œ×•×œ ×œ×©× ×•×œ×¨××•×ª ××•×ª×• ××§×¨×•×‘",
        emoji: "ğŸŒŠ",
      },
      {
        id: 7,
        title: "×—×“×¨ ×”×¢× ×‘×¨ ×”××‘×•×“",
        mainContent: "×™×© ×©××•×¢×” ×¢×ª×™×§×” ×¢×œ ×›×š ×©×§×™×™× ×—×“×¨ ××¡×ª×•×¨×™ ×©× ×§×¨× ×—×“×¨ ×”×¢× ×‘×¨ ğŸ’",
        details:
          "×”×—×“×¨ ×”×–×” ×”×™×” ××¦×•×¤×” ×›×•×œ×• ×‘×œ×•×—×•×ª ×¢× ×‘×¨ ××•×–×”×‘×™×, ××©×•×‘×¦×™× ××‘× ×™ ×—×Ÿ, ××¨××•×ª ×•×¢×™×˜×•×¨×™× ××”×××™×. ×”×•× × ×‘× ×” ×‘×××” ×”-18 ×•×”×™×” × ×—×©×‘ ×œ'×¤×œ× ×”×©××™× ×™ ×©×œ ×”×¢×•×œ×'",
        extraInfo:
          "×‘××”×œ×š ××œ×—××ª ×”×¢×•×œ× ×”×©× ×™×™×”, ×”×—×“×¨ × ×¢×œ× ×‘××•×¤×Ÿ ××¡×ª×•×¨×™ ×œ×—×œ×•×˜×™×Ÿ ×•×××– × ×¢×œ××• ×¢×§×‘×•×ª×™×•",
        conclusion:
          "××– ××™ ×™×•×“×¢? ××•×œ×™ ×™×•× ××—×“ ×™××¦××• ××•×ª×•, ×•×™×™×—×©×£ ×‘×¤× ×™× ×• ×”×™×•×¤×™ ×”××‘×•×“ ×©×œ ×—×“×¨ ×”×¢× ×‘×¨! ğŸ°âœ¨",
        emoji: "ğŸ’",
      },
      {
        id: 8,
        title: "×”××‘×•×š ×©×œ ×˜×™×¨×ª ×•×•×¨×•×•×™×§",
        mainContent: "×©××¢×ª ×¤×¢× ×¢×œ ×”××‘×•×š ×”×¡×•×“×™ ××ª×—×ª ×œ×˜×™×¨×ª ×•×•×¨×•×•×™×§ ×‘×× ×’×œ×™×”? ğŸ°",
        details:
          "××ª×—×ª ×œ×˜×™×¨×” ×”×¢×ª×™×§×” ×”×–×• ××¡×ª×ª×¨×ª ×¨×©×ª ×ª×¢×œ×•×ª ×•×× ×”×¨×•×ª ××¡×•×¢×¤×ª ×©× ×—×¤×¨×” ×‘×™××™ ×”×‘×™× ×™×™×. ×”××‘×•×š ××œ× ×‘××œ×›×•×“×•×ª ××ª×•×—×›××•×ª, ×“×œ×ª×•×ª ×¡×•×“×™×•×ª, ×•××“×¨×’×•×ª ×©××•×‘×™×œ×•×ª ×œ××‘×•×™ ×¡×ª×•×",
        extraInfo:
          "×œ×¤×™ ×”×¡×™×¤×•×¨×™×, ×”××‘×•×š × ×•×¢×“ ×œ×©××© ×›× ×ª×™×‘ ××™×œ×•×˜ ×¢×‘×•×¨ ×”××‘×™×¨×™× ×•×‘× ×™ ×”××¦×•×œ×” ×‘××§×¨×” ×©×œ ××ª×§×¤×” ×¢×œ ×”×˜×™×¨×”. ×¨×§ ×—×œ×§ ×§×˜×Ÿ ××”××‘×•×š ×¤×ª×•×— ×›×™×•× ×œ××‘×§×¨×™×",
        conclusion: "××™ ×™×•×“×¢ ××™×œ×• ×¡×•×“×•×ª ×¢×•×“ ××¡×ª×ª×¨×™× ×‘××¢××§×™ ×”××‘×•×š ×”×¢×ª×™×§ ×”×–×”? ğŸ•¯ï¸",
        emoji: "ğŸ°",
      },
      {
        id: 9,
        title: "×§×•×•×™ × ××¡×§×”",
        mainContent: "×”×× ×©××¢×ª ×¢×œ ×”×¦×™×•×¨×™× ×”××¡×ª×•×¨×™×™× ×‘××“×‘×¨ × ××¡×§×”? ğŸŒµ",
        details:
          "×‘×ª×•×š ××“×‘×¨ × ××¡×§×” ×‘×¤×¨×• ×§×™×™××™× ×§×•×•×™× ×¢×¦×•××™× ×•×¦×•×¨×•×ª ×’×™××•××˜×¨×™×•×ª ×©××©×ª×¨×¢×•×ª ×œ××•×¨×š ×§×™×œ×•××˜×¨×™× ×¨×‘×™×. ×”×§×•×•×™× ×”××œ×” ×™×•×¦×¨×™× ×¦×•×¨×•×ª ×©×œ ×‘×¢×œ×™ ×—×™×™× ×•×¦××—×™× ×©× ×™×ª×Ÿ ×œ×¨××•×ª ×¨×§ ××”××•×•×™×¨",
        extraInfo:
          "××™×© ××™× ×• ×™×•×“×¢ ×‘×•×•×“××•×ª ×œ××” ×”× × ×•×¦×¨×• ××• ××™×š ×™×•×¦×¨×™×”× ×™×›×œ×• ×œ×¢×¦×‘ ××•×ª×Ÿ ×‘×“×™×•×§ ×›×” ××¨×©×™× ×‘×œ×™ ××¤×©×¨×•×ª ×œ×¦×¤×•×ª ×‘×”×Ÿ ××œ××¢×œ×”",
        conclusion:
          "×”×× ×§×•×•×™ × ××¡×§×” ×”× ××¡×¨ ××”×¢×‘×¨? ××• ××•×œ×™ ××¤×ª ×“×¨×›×™× ×¢×ª×™×§×” ×©×˜×¨× ×¤×•×¢× ×—×”? ğŸ›¸",
        emoji: "ğŸŒµ",
      },
      {
        id: 10,
        title: "×”×¢×™×¨ ×¤×•××¤×™×™",
        mainContent: "×”×™×™×ª× ××××™× ×™× ×©×™×© ×¢×™×¨ ×©×œ××” ×©× ×¢×œ××” ×ª×•×š ×™×•×? ğŸŒ‹",
        details:
          "×”×¢×™×¨ ×¤×•××¤×™×™ × ×—×¨×‘×” ×‘×”×ª×¤×¨×¦×•×ª ×”×¨ ×”×’×¢×© ×•×–×•×‘ ×‘×©× ×ª 79 ×œ×¡×¤×™×¨×”. ×”×œ×‘×” ×•×”××¤×¨ ×—× ×§×• ××ª ×”×¢×™×¨ ×‘×¦×•×¨×” ×©×”×¨×‘×” ××‘× ×™× ×•×¤×¨×™×˜×™× × ×©××¨×• ×‘×¦×•×¨×” ××•×©×œ××ª, ×›×•×œ×œ ×’×•×¤×•×ª ×©×”×¤×›×• ×œ×¤×¡×œ×™ ××¤×¨",
        extraInfo:
          "×›×©×”××¨×›×™××•×œ×•×’×™× ×—×¤×¨×• ×‘×¢×™×™ ×”×—×•×¨×‘×•×ª, ×”× ×’×™×œ×• ××ª ×”×¢×™×¨ ×›××¢×˜ ×›×¤×™ ×©×”×™×™×ª×” ×œ×¤× ×™ ××œ×¤×™ ×©× ×™×, ×¢× ×—×¤×¦×™×, ×¦×™×•×¨×™× ×•×¤×¡×œ×™× ×©××¦×™×™× ×™× ××ª ×”×ª×¨×‘×•×ª ×”×¨×•××™×ª ×”×¢×ª×™×§×”",
        conclusion:
          "×¤×•××¤×™×™ ×”×™× ×—×œ×•×Ÿ × ×“×™×¨ ×œ×—×™×™× ×‘×¨×•×× ×”×¢×ª×™×§×”, ×©× ×©××¨ ×‘×–×›×•×ª ××¡×•×Ÿ ×˜×‘×¢ ××—×¨×™×“ ğŸ›ï¸",
        emoji: "ğŸŒ‹",
      },
      {
        id: 11,
        title: "×§×¨×—×•×Ÿ ×¤×“×¨×œ",
        mainContent: "××” ××¡×ª×ª×¨ ×‘×ª×•×š ×”×§×¨×—×•×Ÿ ×”×¢×ª×™×§? â„ï¸",
        details:
          "×‘×§×¨×—×•×Ÿ ×¤×“×¨×œ ×©×‘××¨×¥ ×”××© ×”×ª×’×œ×• ×©×¨×™×“×™× ×©×œ ×¤×•×œ×—× ×™× ×¢×ª×™×§×™× ×©×œ ×¦×™×•×•×™×œ×™×–×¦×™×” ××™× ×“×™×× ×™×ª. × ××¦××• ×§××¢×•×ª, ×ª×›×©×™×˜×™×, ×›×œ×™× ×•×’×•×¤×•×ª ×§×¤×•××•×ª ×¢× ×¢×™×•×•×ª×™× ××¡×ª×•×¨×™×™×",
        extraInfo:
          "×™×© ×ª×™××•×¨×™×•×ª ×¢×œ ×¤×•×œ×—× ×™× ×•×§×¨×‘× ×•×ª ×©× ×¢×©×• ×©×, ×•×”×§×¨×—×•×Ÿ ×©×™××¨ ××ª ×›×œ ×”×××¦××™× ×‘×¦×•×¨×” ××•×©×œ××ª",
        conclusion:
          "×”×§×¨×—×•×Ÿ ×××©×™×š ×œ×©××•×¨ ×¢×œ ×¡×•×“×•×ª×™×• ×”×¢×ª×™×§×™×, ×•×›×œ ×©× ×” ××ª×’×œ×™× ×‘×• ×××¦××™× ×—×“×©×™× ğŸ”ï¸",
        emoji: "â„ï¸",
      },
      {
        id: 12,
        title: "×”×›×—×•×œ×™× ×”××‘×•×“×™× ×©×œ ×’× ×•××”",
        mainContent: "×”×× ×©××¢×ª ×¢×œ ×”×¦×‘×¢ ×©× ×¢×œ×? ğŸ”µ",
        details:
          "×¦×‘×¢ ×›×—×•×œ ×™×™×—×•×“×™ ×©×™×•×¦×¨ ×××™× ×¨×œ × ×“×™×¨ ×©× ××¦× ×¨×§ ×‘××™ ×§×˜×Ÿ ×‘×™× ×”×ª×™×›×•×Ÿ. ×”×¦×‘×¢ ×”×™×” ×™×§×¨ ×™×•×ª×¨ ××–×”×‘ ×‘×™××™ ×”×‘×™× ×™×™×, ××š × ×¢×œ× ×‘××¡×ª×•×¨×™×Ÿ ×‘×××” ×”-16",
        extraInfo:
          "×™×™×ª×›×Ÿ ×©××¡×™×‘×” ×›×œ×©×”×™, ×××’×¨×™ ×”×¦×‘×¢ × ×’××¨×• ××• ×©×”××™× ×¨×œ ×©×”×™×” ×“×¨×•×© ×œ×™×¦×™×¨×ª×• × ×©×›×— ××• ××‘×“, ×•×”×™×“×¢ ×›×™×¦×“ ×œ×”×¤×™×§ ××•×ª×• ××‘×“ ×œ×¢×“",
        conclusion:
          "×¢×“ ×”×™×•×, ×”×¡×•×“ ×©×œ ×”×¦×‘×¢ ×”××‘×•×“ ×œ× ×”×ª×’×œ×”, ×•×‘×—×œ×§ ××”×™×¦×™×¨×•×ª ×”×™×©× ×•×ª ×‘×™×•×ª×¨ ×©×”×©×ª××©×• ×‘×•, ×”×¦×‘×¢ × ×¨××” ×™×•×ª×¨ ×›×”×” ×•××¢×•×¨×¤×œ ğŸ¨",
        emoji: "ğŸ”µ",
      },
      {
        id: 13,
        title: "×”××“×¨×’×•×ª ×”×¡×•×“×™×•×ª ×©×œ ××•×©×™×××“×”",
        mainContent: "×’×™×œ×™×ª ×¤×¢× ××“×¨×’×•×ª ××¡×ª×•×¨×™×•×ª ×‘×™×¢×¨? ğŸŒ²",
        details:
          "×‘×™×¢×¨ ××•×©×™×××“×” ×‘×™×¤×Ÿ × ××¦××•×ª ××“×¨×’×•×ª ××‘×Ÿ ×¢×ª×™×§×•×ª ×•××¡×ª×•×¨×™×•×ª. ××™×© ×œ× ×™×•×“×¢ ××™ ×‘× ×” ××•×ª×Ÿ ××• ××” ××˜×¨×ª×Ÿ",
        extraInfo:
          "×”×ª×™××•×¨×™×” ×”××¨×›×–×™×ª ×˜×•×¢× ×ª ×©×”×Ÿ × ×‘× ×• ×¢×œ ×™×“×™ ×ª×¨×‘×•×ª ×¢×ª×™×§×” ×œ×¦×•×¨×›×™ ×¤×•×œ×—×Ÿ, ×•×™×© ×”××××™× ×™× ×©××™ ×©××¦×œ×™×— ×œ×˜×¤×¡ ×¢×œ×™×”×Ÿ ×¢×“ ×”×¡×•×£, ×™×’×œ×” ××ª ×¡×•×“×Ÿ",
        conclusion:
          "×”×™×¢×¨ ×”×–×” × ×©××¨ ××—×“ ×”××§×•××•×ª ×”××¡×ª×•×¨×™×™× ×‘×™×•×ª×¨ ×‘×™×¤×Ÿ, ×•×”×›×•×— ×”××™×¡×˜×™ ×©××× ×• × ×•×‘×¢×ª ×”××•×•×™×¨×” ×©× ×”×•× ×›×œ ×›×š ×—×–×§ ğŸŒ¿",
        emoji: "ğŸŒ²",
      },
    ];
  }

  setupSearchListeners() {
    if (this.searchInput) {
      this.searchInput.addEventListener("input", (e) => {
        clearTimeout(this.debounceTimeout);
        this.debounceTimeout = setTimeout(() => {
          this.handleSearch(e.target.value);
        }, 300);
      });

      this.searchInput.addEventListener("focus", () => {
        this.searchInput.parentElement.classList.add("focused");
      });

      this.searchInput.addEventListener("blur", () => {
        this.searchInput.parentElement.classList.remove("focused");
      });
    }
  }

  handleSearch(searchTerm) {
    if (!searchTerm.trim()) {
      this.renderSecrets(this.allSecrets);
      return;
    }

    const filteredSecrets = this.allSecrets.filter((secret) => {
      const searchTermLower = searchTerm.toLowerCase();
      return (
        secret.title.toLowerCase().includes(searchTermLower) ||
        secret.mainContent.toLowerCase().includes(searchTermLower) ||
        secret.details.toLowerCase().includes(searchTermLower)
      );
    });

    this.renderSecrets(filteredSecrets);
  }

  renderSecrets(secrets) {
    if (!secrets.length) {
      this.secretsGrid.innerHTML = `
        <div class="no-results">
          <p>×œ× × ××¦××• ×¡×•×“×•×ª ××ª××™××™× ×œ×—×™×¤×•×© ×©×œ×š ğŸ”</p>
          <p>× ×¡×• ×œ×—×¤×© ××©×”×• ××—×¨</p>
        </div>
      `;
      return;
    }

    this.secretsGrid.innerHTML = "";

    secrets.forEach((secret) => {
      const card = document.createElement("div");
      card.className = "secret-card";
      card.innerHTML = `
        <div class="card-emoji">${secret.emoji}</div>
        <div class="card-background-emoji">${secret.emoji}</div>
        <div class="secret-card-content">
          <h2>${secret.title}</h2>
          <p>${secret.mainContent}</p>
          <a href="#" class="reveal-btn" data-id="${secret.id}">×’×œ×” ××ª ×”×¡×•×“ ğŸ”</a>
        </div>
      `;
      this.secretsGrid.appendChild(card);
    });

    // ×”×•×¡×¤×ª ×××–×™× ×™ ×œ×—×™×¦×” ×œ×›×¤×ª×•×¨×™ ×”×’×™×œ×•×™
    this.secretsGrid.querySelectorAll(".reveal-btn").forEach((btn) => {
      btn.addEventListener("click", (e) => {
        e.preventDefault();
        const secretId = parseInt(btn.dataset.id);
        this.showSecretDetails(secretId);
      });
    });
  }

  showSecretDetails(secretId) {
    const secret = this.allSecrets.find((s) => s.id === secretId);
    if (!secret) return;

    const modal = document.createElement("div");
    modal.className = "secret-modal";
    modal.innerHTML = `
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        
        <div class="secret-header">
          <h2>${secret.emoji} ${secret.title}</h2>
        </div>
        
        <div class="secret-main">
          <p class="main-content">${secret.mainContent}</p>
        </div>
        
        <div class="secret-details">
          <p>${secret.details}</p>
        </div>
        
        <div class="secret-extra">
          <p>${secret.extraInfo}</p>
        </div>
        
        <div class="secret-conclusion">
          <p>${secret.conclusion}</p>
        </div>
      </div>
    `;

    document.body.appendChild(modal);

    // ×××–×™× ×™ ×¡×’×™×¨×” ×œ××•×“×œ
    const closeBtn = modal.querySelector(".close-modal");
    closeBtn.onclick = () => modal.remove();
    modal.onclick = (e) => {
      if (e.target === modal) modal.remove();
    };
  }

  updateDateTime() {
    const timeElement = document.getElementById("current-time");
    const dateElement = document.getElementById("current-date");

    if (!timeElement || !dateElement) return;

    const now = new Date();

    try {
      const timeString = now.toLocaleTimeString("he-IL", {
        hour: "2-digit",
        minute: "2-digit",
      });

      const dateString = now.toLocaleDateString("he-IL", {
        year: "numeric",
        month: "long",
        day: "numeric",
      });

      timeElement.textContent = timeString;
      dateElement.textContent = dateString;
    } catch (error) {
      console.error("Error updating date/time:", error);
    }
  }

  handleError(error) {
    console.error("Error:", error);
    this.secretsGrid.innerHTML = `
      <div class="error-message">
        <p>××¦×˜×¢×¨×™×, ××©×”×• ×”×©×ª×‘×©. × ×¡×• ×œ×¨×¢× ×Ÿ ××ª ×”×¢××•×“.</p>
        <button onclick="location.reload()">×˜×¢×Ÿ ××—×“×©</button>
      </div>
    `;
  }
}

// ×™×¦×™×¨×ª ××•×¤×¢ ×©×œ ×× ×”×œ ×”×¡×•×“×•×ª ×›×©×”×“×£ × ×˜×¢×Ÿ
document.addEventListener("DOMContentLoaded", () => {
  new SecretsManager();
});
